"use strict";(()=>{var i=class{constructor(){this.OBSK="7b9f57bf-7898-4287-bfbf-d64e7c15916e";this.listeners={};window.addEventListener("message",t=>{if(!t||!t.data)return;let e=t.data;e.requestId&&this.listeners[e.requestId]&&(this.listeners[e.requestId](e.payload),delete this.listeners[e.requestId])})}generateId(){return"xxxxxx".replace(/[x]/g,function(){return(Math.random()*16|0).toString(16)})}request(t,e,s){let n=this.generateId(),r={requestId:n,action:t,data:e};this.listeners[n]=s,window.parent.postMessage(r,"*")}send(t,e){let s={action:t,data:e};window.parent.postMessage(s,"*")}sendScore(t,e){this.request("score",{score:t},s=>e(s))}getConfiguration(t){this.request("get-configuration",{},e=>t(e))}saveConfiguration(t,e){this.request("save-configuration",{configuration:t},s=>e(s))}getDatabase(t){this.request("list",{},e=>t(e))}saveStorage(t,e){this.request("save-storage",{storage:t},s=>e(s))}obfuscate(t){let e=encodeURIComponent(JSON.stringify(t)),s="";for(let n=0;n<e.length;n++)s+=String.fromCharCode(e.charCodeAt(n)^this.OBSK.charCodeAt(n%this.OBSK.length));return btoa(s)}deobfuscate(t){let e=atob(t),s="";for(let n=0;n<e.length;n++)s+=String.fromCharCode(e.charCodeAt(n)^this.OBSK.charCodeAt(n%this.OBSK.length));return JSON.parse(decodeURIComponent(s))}};window.EducentreActivityBridge=i;})();
